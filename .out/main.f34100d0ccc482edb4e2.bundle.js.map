{"version":3,"file":"main.f34100d0ccc482edb4e2.bundle.js","sources":["webpack:///./src/components/Text.js"],"sourcesContent":["import React, { useState } from 'react'\nimport { fontFamilies } from '@project-r/styleguide'\nimport theme from './theme'\nimport chunk from 'lodash/chunk'\nimport last from 'lodash/last'\nimport { format } from 'd3-format'\n\nexport const fonts = (boardSize) => ({\n  small: {\n    fontFamily: fontFamilies.sansSerifRegular,\n    fontSize: boardSize / 60,\n  },\n  regular: {\n    fontFamily: fontFamilies.sansSerifRegular,\n    fontSize: boardSize / 50,\n    lineHeight: `${boardSize / 50 * 1.2}px`\n  },\n  bold: {\n    fontFamily: fontFamilies.sansSerifMedium,\n    fontSize: boardSize / 50,\n  },\n  large: {\n    fontFamily: fontFamilies.sansSerifRegular,\n    fontSize: boardSize / 35,\n  },\n  huge: {\n    fontFamily: fontFamilies.serifTitle,\n    fontSize: boardSize / 20,\n  },\n  display: {\n    fontFamily: fontFamilies.serifTitle,\n    fontSize: boardSize / 10,\n  }\n})\n\nconst f = format(\".2f\");\nexport const formatAmount = (amount) => {\n  if (Math.floor(amount) === amount) {\n    return `${amount}.â€“`\n  } else {\n    return f(amount)\n  }\n}\n\nconst Text = ({boardSize, type, charsPerLine, children, x, y, ...rest}) => {\n\n  if (!children)\n    return null\n\n  const tokens = children.split(/\\s|-/).filter(Boolean)\n\n  const lines = tokens.reduce((acc, cur) => {\n    const lastLine = last(acc)\n    if (lastLine.join(' ').length + cur.length > charsPerLine) {\n      acc.push([cur])\n    } else {\n      last(acc).push(cur)\n    }\n    return acc\n  }, [['']])\n\n  const font = fonts(boardSize)[type]\n  const lineHeight = font.fontSize *1.1\n\n\n  return (\n    <g>\n      {\n        lines.map((c,i) => <text x={x} y={y+(i*lineHeight)} textAnchor='middle' alignmentBaseline='central' style={font} {...rest}>{c.join(' ')}</text>)\n      }\n    </g>\n  )\n}\n\nText.defaultProps = {\n  boardSize: 800,\n  type: 'regular',\n  x: 0,\n  y: 0,\n  charsPerLine: 6,\n}\n\nexport default Text"],"mappings":"AAOA","sourceRoot":""}